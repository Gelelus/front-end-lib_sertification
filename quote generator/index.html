<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Формы в React</title>
</head>
<body>
    <div class ='container'>
 <h1><span>Quote Generator</span></h1>
<div id="quote-box">
   <blockquote class = 'changeable'>
    <p id='text'></p>
    <footer id='author'></footer>
  </blockquote>

  <div class = 'btns'> 
    
    <a id="tweet-quote" href = "https://twitter.com/intent/tweet" target="_blank">
      <i class="fa fa-twitter" aria-hidden="true"></i>
    </a>
       <a id="vk-quote" href = "#" target="_blank">
      <i class="fa fa-vk" aria-hidden="true"></i>
    </a>
    
    <a id="new-quote" >
       Next quote <i class="fa fa-chevron-circle-right" aria-hidden="true"></i>


    </a>  
</div>
  </div>
   
        
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script>
    let Random;
let quotes;

function getQuotes() {
   $.ajax({
    headers: {
      Accept: "application/json"
    },
    url: 'https://raw.githubusercontent.com/Gelelus/front-end-lib_sertification/master/quote%20generator/quotes.json',
    success: function(data) {
      if (typeof data === 'string') {
        quotes = JSON.parse(data).quotes;
        nextQuote(false)
      }
    }
  });
}
function nextQuote(n){
  Random = Math.floor(Math.random()*quotes.length);
  let text = quotes[Random].quote;
  let author = quotes[Random].author;
  $('#tweet-quote').on('click', function() {
    event.preventDefault();
    window.open(`https://twitter.com/intent/tweet?hashtags=quotes&text="${text}"-${author}`);
  })
  if(n){
    $("#author").html(` `);
      function textGo(i){
        if(i == text.length+3){
         $("#author").html(`- ${author}`);
         return
        }
        $("#text").html(`${`"${text}"`.slice(0,i++)}`);
        setTimeout(() => textGo(i),20)
      }
      textGo(1)
  }else{
    $("#text").html(`"${text}"`)
    $("#author").html(`- ${author}`)
  }
}
getQuotes() ;
$('#new-quote').on('click', ()=> nextQuote(true));
    </script>
</body>
</html>
</body>
</html>
